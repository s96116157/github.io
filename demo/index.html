<!doctype html>
<html lang="en">
<head>
    <title>Order</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/bootstrap-theme.min.css" rel="stylesheet" />
    <script src="js/bootstrap.min.js"></script>
    <script src="js/Chart.min.js"></script>
    <script src="js/Chart.bundle.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        // Load the Visualization API and the corechart package.
        google.charts.load('current', { 'packages': ['corechart'] });

        // Set a callback to run when the Google Visualization API is loaded.
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1X5Mtln-MYBhyBRn0RveNOXCkb32A4VTzht1AIGkNvdU/edit#gid=1947911464');
            query.setQuery("SELECT count(B) group by B");
            query.send(handleQueryResponse);
            console.log('1');
        }


        function handleQueryResponse(response) {
            if (response.isError()) {
                alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                return;
            }

            var data = response.getDataTable();
            var numrows = data.getNumberOfRows();
            console.log("numrows", numrows);
            var tableHtml = '<table width="800">';

            for (var row = 0; row < numrows; row++) {
                var a = '';
                var A = data.getValue(row, 0);
                //var B = data.getValue(row, 1);
                //var name = data.getValue(row, 2);
                //var value = data.getValue(row, 3);

                tableHtml += '<tr><td>ID：' + A + '</td></tr><tr><td>Name：' + A + '</td></tr><tr><td>Age：' + A + '</td></tr>';
                a = '<tr><td>' + A + '</td><td>' + A + '</td><td>' + A + '</td><td>' + A + '</td>';
                console.log(row, a);
            }
            tableHtml += '</table>';
            $('table').append(tableHtml);
        }

        function Google_Post() {
            if (1 == 1) {
                alert("OK");
                var url = "https://script.google.com/macros/s/AKfycbwQerqt4HKL_H5hvFvshvMSwWrnAusvvd0eVhDFwViHNmSQZ2tm/exec";
                var parameter = {
                    startRow: 1,
                    startColumn: 1,
                    key: 96116157,
                    type: "write",
                    time: GetDate()
                };

                $.get(url, parameter, function (data) {
                    console.log(data);
                });
            };
        };

        function GetDate() {
            var d = new Date();
            var val_time = d.toLocaleTimeString();
            var val_day = d.getDate();
            var val_month = d.getMonth() + 1;
            var val_year = d.getFullYear();
            var time = val_year + "年" + val_month + "月" + val_day + "日 " + val_time;
            return time;
        }
    </script>

    <style>
        body {
            font-family: "Microsoft JhengHei",Helvetica,Arial,Verdana,sans-serif;
            color: white;
            font-size: 22px;
        }
    </style>
</head>
<body style="background-color: #333333;">

    <!--============================================================================-->

    <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">对话框标题</h3>
        </div>
        <div class="modal-body">
            <p>对话框主体内容 ...…</p>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
            <button class="btn btn-primary">保存修改</button>
        </div>
    </div>

    <!--============================================================================-->

    <div style="margin: 10px;">
        <h1 style="color: white;">Hello, do you want to order something?</h1>
        <form>
            <br />
            <div class="row show-grid">
                <div class="col-xs-6 col-md-3" style="text-align: center;">
                    <img data-src="holder.js/200x200" class="img-thumbnail" alt="200x200" src="Picture/icon_002.png" data-holder-rendered="true" style="width: 200px; height: 200px;">
                    <div>
                        150 NT
                    <button type="button" class="btn btn-success ">放入購物車</button>
                    </div>
                </div>
                <div class="col-xs-6 col-md-3" style="text-align: center;">
                    <img data-src="holder.js/200x200" class="img-thumbnail" alt="200x200" src="Picture/icon_003.png" data-holder-rendered="true" style="width: 200px; height: 200px;">
                    <div>
                        150 NT
                    <button type="button" class="btn btn-success ">放入購物車</button>
                    </div>
                </div>
                <div class="col-xs-6 col-md-3" style="text-align: center;">
                    <img data-src="holder.js/200x200" class="img-thumbnail" alt="200x200" src="Picture/icon_004.png" data-holder-rendered="true" style="width: 200px; height: 200px;">
                    <div>
                        150 NT
                    <button type="button" class="btn btn-success ">放入購物車</button>
                    </div>
                </div>
                <div class="col-xs-6 col-md-3" style="text-align: center;">
                    <img data-src="holder.js/200x200" class="img-thumbnail" alt="200x200" src="Picture/icon_005.png" data-holder-rendered="true" style="width: 200px; height: 200px;">
                    <div>
                        150 NT
                    <button type="button" class="btn btn-success ">放入購物車</button>
                    </div>
                </div>
            </div>
            <br />
            <div style="text-align: center;">
                <a href="#myModal" role="button" class="btn btn-primary" data-toggle="modal">購買商品　<span class="badge badge-light">4</span></a>
            </div>
            <div>
                <div class="row show-grid">
                    <div class="col-xs-6 col-md-4">
                        <div class="chartjs-wrapper">
                            <iframe class="chartjs-hidden-iframe" tabindex="-1" style="display: block; overflow: hidden; border: 0px; margin: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; height: 100%; width: 100%; position: absolute; pointer-events: none; z-index: -1;"></iframe>
                            <canvas id="chartjs-4" class="chartjs" width="667" height="333" style="display: block; height: 267px; width: 534px;"></canvas>

                        </div>
                    </div>
                    <div class="col-xs-6 col-md-4">
                        <div class="chartjs-wrapper">
                            <canvas id="chartjs-1" class="chartjs" width="656" height="327" style="display: block; height: 262px; width: 525px;"></canvas>
                        </div>
                    </div>

                    <div class="col-xs-6 col-md-4"></div>
                </div>

            </div>

            <table style="color: white;"></table>
            <input type="button" class="btn btn-primary" value="TEST" onclick="Google_Post()">
            <input type="button" class="btn btn-primary" value="A" onclick="Show_Value()">
            <input type="button" class="btn btn-primary" value="B" onclick="Destroy_Value()">
        </form>
    </div>
    <script type="text/javascript">
        function Destroy_Value() {
            new Chart(document.getElementById("chartjs-4"),
                    {
                        "type": "doughnut", "data": {
                            "labels": ["A", "B", "C"],
                            "datasets": [{
                                "label": "My First Dataset", "data": [100, 150, 20],
                                "backgroundColor": ["rgb(255, 99, 132)", "rgb(54, 162, 235)", "rgb(255, 205, 86)"]
                            }]
                        }
                    });
        };

        function Show_Value() {
            new Chart(document.getElementById("chartjs-4"),
                {
                    "type": "doughnut", "data": {
                        "labels": ["Red", "Blue", "Yellow"],
                        "datasets": [{
                            "label": "My First Dataset", "data": [300, 50, 100],
                            "backgroundColor": ["rgb(255, 99, 132)", "rgb(54, 162, 235)", "rgb(255, 205, 86)"]
                        }]
                    }
                });
            new Chart(document.getElementById("chartjs-1"),
                {
                    "type": "bar", "data": {
                        "labels": ["January", "February", "March", "April", "May", "June", "July"],
                        "datasets": [{
                            "label": "My First Dataset", "data": [65, 59, 80, 81, 56, 55, 40], "fill": false,
                            "backgroundColor": ["rgba(255, 99, 132, 0.2)", "rgba(255, 159, 64, 0.2)", "rgba(255, 205, 86, 0.2)", "rgba(75, 192, 192, 0.2)", "rgba(54, 162, 235, 0.2)", "rgba(153, 102, 255, 0.2)", "rgba(201, 203, 207, 0.2)"],
                            "borderColor": ["rgb(255, 99, 132)", "rgb(255, 159, 64)", "rgb(255, 205, 86)", "rgb(75, 192, 192)", "rgb(54, 162, 235)", "rgb(153, 102, 255)", "rgb(201, 203, 207)"],
                            "borderWidth": 1
                        }]
                    }, "options": {
                        "scales": {
                            "yAxes": [{
                                "ticks": {
                                    "beginAtZero": true
                                }
                            }]
                        }
                    }
                });
        }
    </script>
</body>
</html>
